<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pro Calculator</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="manifest" href="manifest.webmanifest" />

  <link rel="icon" type="image/png" sizes="16x16" href="gi.png">
  <link rel="icon" type="image/png" sizes="32x32" href="gi.png">
</head>

<body>
  <!-- PARTICLE SYSTEM CONTAINER -->
  <div id="particle-container"></div>

  <div id="cursor-sparkles"></div>
  <div id="custom-cursor"></div>


  <main class="app" data-theme="dark">
    <!-- Mic coachmark (non-blocking) -->
    <div id="micCoach" class="mic-coach" role="status" aria-live="polite" hidden>
      <span class="coach-text">Click the mic to speak</span>
      <button class="coach-close" aria-label="Dismiss">√ó</button>
    </div>

    <header class="topbar" aria-label="Calculator header">
      <h1 class="brand">Pro Calculator</h1>
      <div class="controls">
        <button id="themeToggle" class="icon-btn" aria-label="Toggle theme" title="Toggle theme">üé®</button>
        <button id="historyToggle" class="icon-btn" aria-label="Toggle history" title="Toggle history">üïò</button>
        <button id="a11yToggle" class="icon-btn" aria-label="Toggle high contrast"
          title="Toggle high contrast">üÖ∞Ô∏è</button>
        <button id="voiceToggle" class="icon-btn mic-off" aria-label="Toggle voice control"
          title="Toggle voice control">üéôÔ∏è</button>
        <button id="apiSettings" class="icon-btn" aria-label="Set voice backend URL"
          title="Set voice backend URL">üîó</button>
      </div>
    </header>

    <div class="voice-panel" role="status" aria-live="polite">
      <span id="voiceStatus" class="voice-status">Mic off</span>
    </div>

    <section class="display" aria-live="polite" aria-atomic="true">
      <div id="expression" class="expression" title="Expression"></div>
      <div id="result" class="result" title="Result">0</div>
    </section>

    <section class="keypad" aria-label="Calculator keys">
      <!-- Memory Row -->
      <div class="row">
        <button class="btn fn" data-action="MC" aria-label="Memory Clear">MC</button>
        <button class="btn fn" data-action="MR" aria-label="Memory Recall">MR</button>
        <button class="btn fn" data-action="M+" aria-label="Memory Add">M+</button>
        <button class="btn fn" data-action="M-" aria-label="Memory Subtract">M-</button>
      </div>

      <!-- Function / Clear Row -->
      <div class="row">
        <button class="btn fn" data-action="CE" aria-label="Clear Entry">CE</button>
        <button class="btn fn" data-action="C" aria-label="Clear All">C</button>
        <button class="btn fn" data-action="BACK" aria-label="Backspace">‚å´</button>
        <button class="btn op" data-value="/" aria-label="Divide">√∑</button>
      </div>

      <!-- Main Grid -->
      <div class="row">
        <button class="btn fn" data-action="SQRT" aria-label="Square Root">‚àö</button>
        <button class="btn fn" data-action="PERCENT" aria-label="Percent">%</button>
        <button class="btn fn" data-action="RECIP" aria-label="Reciprocal">1/x</button>
        <button class="btn op" data-value="*" aria-label="Multiply">√ó</button>
      </div>

      <div class="row">
        <button class="btn" data-value="7" aria-label="Seven">7</button>
        <button class="btn" data-value="8" aria-label="Eight">8</button>
        <button class="btn" data-value="9" aria-label="Nine">9</button>
        <button class="btn op" data-value="-" aria-label="Minus">‚àí</button>
      </div>

      <div class="row">
        <button class="btn" data-value="4" aria-label="Four">4</button>
        <button class="btn" data-value="5" aria-label="Five">5</button>
        <button class="btn" data-value="6" aria-label="Six">6</button>
        <button class="btn op" data-value="+" aria-label="Plus">+</button>
      </div>

      <div class="row">
        <button class="btn" data-value="1" aria-label="One">1</button>
        <button class="btn" data-value="2" aria-label="Two">2</button>
        <button class="btn" data-value="3" aria-label="Three">3</button>
        <button class="btn fn" data-action="OPEN" aria-label="Open Parenthesis">(</button>
      </div>

      <div class="row">
        <button class="btn wide" data-value="0" aria-label="Zero">0</button>
        <button class="btn" data-value="." aria-label="Decimal">.</button>
        <button class="btn fn" data-action="CLOSE" aria-label="Close Parenthesis">)</button>
        <button class="btn eq" data-action="EQUALS" aria-label="Equals">=</button>
      </div>
    </section>

    <aside id="history" class="history" aria-label="History drawer" hidden>
      <header class="history-header">
        <h2>History</h2>
        <div class="history-actions">
          <input id="historySearch" type="search" placeholder="Search‚Ä¶" aria-label="Search history" />
          <button id="exportCSV" class="mini-btn" aria-label="Export CSV">CSV</button>
          <button id="exportJSON" class="mini-btn" aria-label="Export JSON">JSON</button>
          <button id="clearHistory" class="mini-btn danger" aria-label="Clear History">Clear</button>
        </div>
      </header>
      <ul id="historyList" class="history-list" role="list"></ul>
    </aside>
  </main>

  <!-- Optional config override: define window.PROCALC_VOICE_API_BASE in config.js -->
  <script src="config.js"></script>
  <script src="script.js" defer></script>
</body>

</html>